{% extends "psa_base.html" %}

{% block content %}
  {% if form.errors %}
    <!-- TODO: Style error messages -->
    Your email and password didn't match. Please try again.
  {% endif %}

  <!-- TODO: What is this? -->
  {% if not user.is_authenticated %}
  {% endif %}

  <div class="auth-card">
    <header>
      <h1>Log In</h1>

      <p>Don't have an account yet? <a href="{% url 'signup' %}">Sign up</a></p>
    </header>

    <section class="auth-card__social-options">
      {% include "psa/social_backends.html" %}

      <p>
        <span>or use the form below if you signed up using your email</span>
      </p>
    </section>

    <main class="auth-card__content">
      <form class="form-horizontal" name="LoginForm" action="." method="post">
        {% csrf_token %}

        {% for field in form %}
          {% if not field.is_hidden %}
            {{ field.label_tag }}
            {{ field }}
            {{ field.errors }}
          {% else %}
            {{ field }}
          {% endif %}
        {% endfor %}

        <div class="auth-card__actions">
          <a href="{% url 'accounts:password_reset' %}">Forgot your password?</a>

          <input type="submit" value="Log In">
        </div>
      </form>
    </main>
  </div>

  {% if DEBUG %}
    {% include "psa/user_details.html" %}
  {% endif %}
{% endblock %}
